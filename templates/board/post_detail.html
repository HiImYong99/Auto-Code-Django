{% extends "base.html" %}
{% load static %}
{% block header %}
<div class="fixed top-0 z-10 flex flex-wrap items-center justify-between w-full p-6 bg-gray-400 opacity-95">
    <nav class="flex items-center flex-shrink-0 mr-6">
        <a class="duration-500 hover:text-white" href="{% url "main:index" %}">
            <span class="pl-2 text-2xl"> Auto Coding</span>
        </a>
    </nav>
    <nav class="flex-grow hidden w-full pt-6 md:flex md:items-center md:w-auto md:pt-0" id="nav-content">
        <ul class="items-center justify-end flex-1 list-reset md:flex">            
                <li id="start-link" class="mr-3">
                    <a class="inline-block px-4 py-2 text-gray-800 duration-500 hover:text-gray-200"
                        href="{% url "board:postlist" %}">ì»¤ë®¤ë‹ˆí‹°</a>
                    </li>
            {% if user.is_authenticated %}
            <li id="info-link" class="mr-3">
                <button
                    class="inline-block px-4 py-2 text-gray-800 no-underline duration-500 btn hover:text-gray-200"
                    onclick="myCount.showModal()">ë‚´ í†µê³„</button>
                <dialog id="myCount" class="w-5/6 modal modal-bottom sm:modal-middle rounded-3xl opacity-95">
                    <div class="px-10 py-8 text-center bg-gray-400 modal-box">
                        <h3 class="text-4xl font-bold">ë‚´ í†µê³„ ğŸ—“ï¸</h3>
                        <section class="p-10">
                            <h2
                                class="py-3 mb-10 text-xl text-center bg-gray-200 rounded-2xl font-GongGothicMedium">
                                ë‚´ê°€ Auto Codingì„ ì´ìš©í•œ
                                íšŸìˆ˜ëŠ” </h2>
                            <p id="use-count" class="text-4xl text-center">0íšŒ</p>
                        </section>
                        <section class="p-10">
                            <h2
                                class="py-3 mb-10 text-xl text-center bg-gray-200 rounded-2xl font-GongGothicMedium">
                                ë‚´ê°€ ê°€ì¥ ë§ì´ ì‚¬ìš©í•œ ì–¸ì–´ëŠ”
                            </h2>
                            <p id="lang-count" class="text-4xl text-center">0íšŒ</p>
                        </section>
                        <section class="p-10">
                            <h2
                                class="py-3 mb-10 text-xl text-center bg-gray-200 rounded-2xl font-GongGothicMedium">
                                ê°€ì¥ ë§ì´ ì‚¬ìš©í•œ ê¸°ëŠ¥ì€</h2>
                            <p id="method-count" class="text-4xl text-center">0íšŒ</p>
                        </section>
                        <div class="modal-action">
                            <form method="dialog">
                                <button
                                    class="btn text-white  hover:text-black px-8 py-2.5 rounded-3xl bg-red-500 duration-500">ë‹«ê¸°</button>
                            </form>
                        </div>
                    </div>
                </dialog>
            </li>
            <li id="history-link" class="mr-3">
                <a class="inline-block px-4 py-2 text-gray-800 no-underline duration-500 hover:text-gray-200 hover:text-underline"
                    href="#">ë‚´ ê¸°ë¡</a>
            </li>
            <li id="start-link" class="mr-3">
                <a class="inline-block px-4 py-2 text-gray-800 duration-500 hover:text-gray-200"
                    href="{% url "accounts:logout" %}">ë¡œê·¸ì•„ì›ƒ</a>
                </li>   
                {% else %}
                <li id="start-link" class="mr-3">
                    <a class="inline-block px-4 py-2 text-gray-800 duration-500 hover:text-gray-200"
                        href="{% url "accounts:login" %}">ë¡œê·¸ì¸</a>
                    </li>                  
                    <li id="start-link" class="mr-3">
                        <a class="inline-block px-4 py-2 text-gray-800 duration-500 hover:text-gray-200"
                            href="{% url "accounts:signup" %}">íšŒì›ê°€ì…</a>
                        </li>  
        </ul>
    </nav>
    <div class="block md:hidden">
        <button id="nav-toggle"
            class="flex items-center px-3 py-2 text-gray-500hover:text-white hover:border-white">
            <svg class="w-5 h-5 fill-current" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                <title>Menu</title>
                <path d="M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z" />
            </svg>
        </button>
    </div>
</div>      
            {% endif %}

{% endblock  %}
{% block content %}
    <div class="container mx-auto flex flex-wrap py-6 mt-20">
        <!-- Post Section -->
        <section class="w-full flex flex-col items-center px-3">
            <article class="flex flex-col w-full shadow my-4">

                <div class="bg-gray-100 flex flex-col justify-start p-6">
                    <a class="text-blue-700 text-sm font-bold uppercase pb-4">{{post.category}}</a>
                    <a class="text-3xl font-bold hover:text-gray-700 pb-4">{{post.title}}</a>
                    <p class="text-sm">ê¸€ì“´ì´: <a class="font-semibold hover:text-gray-800">{{post.writer}}</a></p>
                    <p >ì‘ì„±ì¼ {{post.created_at|date:"Yë…„ mì›” dì¼"}} {{ post.created_at|time:"Gì‹œ ië¶„"}}</p>
                    <p>ì¡°íšŒìˆ˜ {{post.view_count}}</p>
                    <a href="{% url "board:postupdate" post.pk %}">ìˆ˜ì •</a>
                    <a href="{% url "board:postdelete" post.pk %}">ì‚­ì œ</a>                    
                    <p class="pb-3">{{post.content}}</p>
                    {% if post.img %}
                    <img src="{{post.img.url}}" width='500px'>
                {% endif %}

                </div>
            </article>

        </section>
            <div class="w-full flex p-6">          
                {% with next_post=post.get_next_by_created_at %}
                {% if next_post %}
                <a href="{% url "board:postdetail" next_post.pk %}" class="w-1/2 bg-gray-100 shadow hover:shadow-md text-left p-6">
                    <p class="text-lg text-blue-800 font-bold flex items-center"><i class="fas fa-arrow-left pr-1"></i>ë‹¤ìŒ ê¸€</p>
                    <p class="pt-2">{{ next_post.title }}</p>
                </a>
                {% endif %}
                {% endwith %}
                {% with previous_post=post.get_previous_by_created_at %}
                {% if previous_post %}
                <a href="{% url "board:postdetail" previous_post.pk %}" class="w-1/2 bg-gray-100 shadow hover:shadow-md text-left p-6">
                    <p class="text-lg text-blue-800 font-bold flex items-center"><i class="fas fa-arrow-left pr-1"></i> ì´ì „ ê¸€</p>
                    <p class="pt-2">{{ previous_post.title }}</p>
                </a>
                {% endif %}
                {% endwith %}
            </div>
            <div>
            <h3>ëŒ“ê¸€</h3>
            {% for comment in post.comments.all %}
                <p>{{comment.writer}}</p>
                <p>{{comment.created_at}}</p>
            {% endfor %}
            
            <form action="{% url 'board:comment_new' post.pk %}" method="post">
                {% csrf_token %}
                {{ comment_form.as_p }}
                <input type="submit" value="ëŒ“ê¸€ ì‘ì„±">
            </form>
        </div>

        {% endblock  %}